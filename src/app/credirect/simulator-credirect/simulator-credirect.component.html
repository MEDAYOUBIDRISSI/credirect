<div class="loan-simulator">
  <h1>Loan Simulator</h1>

  <div class="summary">
    <div class="summary-item">
      <h2>Loan Details</h2>
      <p>Loan Amount: {{ loanAmount | number:'1.2-2' }}</p>
      <p>Interest Rate: {{ interestRate }}%</p>
      <p>Duration: {{ loanDuration }} years</p>
    </div>

    <div class="summary-item">
      <h2>Summary</h2>
      <p>Monthly Payment: {{ monthlyPayment | number:'1.2-2' }}</p>
      <p>Total Interest: {{ totalInterest | number:'1.2-2' }}</p>
      <p>Total Cost: {{ totalCost | number:'1.2-2' }}</p>
    </div>
  </div>

  <div class="inputs">
    <label>
      Loan Amount:
      <input type="number" [(ngModel)]="loanAmount" (change)="calculateLoan()" />
    </label>

    <label>
      Interest Rate (%):
      <input type="number" [(ngModel)]="interestRate" (change)="calculateLoan()" />
    </label>

    <label>
      Loan Duration (years):
      <input type="number" [(ngModel)]="loanDuration" (change)="calculateLoan()" />
    </label>

    <label>
      Monthly Insurance Rate:
      <input type="number" [(ngModel)]="monthlyInsuranceRate" (change)="calculateLoan()" />
    </label>

    <label>
      Early Repayment:
      <input type="number" [(ngModel)]="earlyRepayment" (change)="calculateLoan()" />
    </label>
  </div>

  <h2>Amortization Schedule</h2>
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Date</th>
        <th>Principal</th>
        <th>Interest</th>
        <th>Insurance</th>
        <th>Total Payment</th>
        <th>Remaining Balance</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of amortizationSchedule; let i = index">
        <td>{{ i + 1 }}</td>
        <td>
          <!-- {{ (new Date(2024, i % 12, 1)) | date:'MMM yyyy' }} -->
        </td>
        <td>
          {{ row.principalPayment | number:'1.2-2' }}
        </td>
        <td>
          {{ row.interestPayment | number:'1.2-2' }}
        </td>
        <td>
          {{ (loanAmount * monthlyInsuranceRate) | number:'1.2-2' }}
        </td>
        <td>
          {{ monthlyPayment | number:'1.2-2' }}
        </td>
        <td>
          {{ row.remainingBalance | number:'1.2-2' }}
        </td>
      </tr>
    </tbody>
  </table>
</div>